# AV Library 功能更新

## 新增功能

### 1. 點選封面連結至影片
- ✅ 在預覽卡片上，點選封面圖片即可：
  - 若有串流網址：直接在頁面上播放影片
  - 若無串流網址：前往影片原始網址（jable.tv）
- ✅ 在影片清單（稍後觀看/看過的影片）中，點選任何影片的封面都能快速打開：
  - 支援播放從頁面中抓取的串流網址
  - 支援連結到原始影片頁面
- ✅ 覆蓋層設計：滑鼠懸停時顯示播放按鈕提示

### 2. 串流網址抓取與播放
- ✅ 在提交新影片時，自動嘗試從頁面抓取串流網址（m3u8/mp4）
- ✅ 若成功取得串流網址，會在預覽中顯示並提供播放按鈕
- ✅ 播放器功能：
  - 模態框播放器，支援全螢幕播放
  - HTML5 video 標籤支援暫停、播放、音量控制
  - 響應式設計，適配各種螢幕尺寸

### 3. 影片清單增強
- ✅ 每個影片卡片上添加播放按鈕（若有串流網址）
- ✅ 支援列表視圖和網格視圖中的播放功能
- ✅ 點選「播放」按鈕直接播放影片
- ✅ 保留「前往」按鈕，用於打開原始影片頁面

## 技術實現

### 修改的文件

1. **av-library.js**
   - 添加 `playerModal` 變數用於管理播放器模態框
   - 新增 `openPlayer(title, streamUrl)` 函數
   - 修改 `renderPreview()` 以支持點擊播放和串流顯示
   - 修改 `renderList()` 以添加卡片覆蓋層和播放按鈕
   - 修改 `initListPage()` 以處理新的點擊事件
   - 修改表單提交以包含 `stream` 欄位
   - 修改 `initPage()` 以初始化播放器模態框

2. **av-library.css**
   - 添加卡片覆蓋層樣式 (`.av-card-overlay`)
   - 添加播放按鈕樣式 (`.av-play-btn`)
   - 支援列表和網格視圖的懸停效果
   - 優化響應式設計

3. **index.html**
   - 添加播放器模態框 HTML
   - 在預覽卡片中添加串流 URL 顯示
   - 添加播放按鈕到預覽區域

4. **later.html** 和 **watched.html**
   - 添加播放器模態框 HTML

## 使用方式

### 基本操作
1. 在主頁面輸入影片序號（例如 SSNI-865）
2. 系統會自動搜尋並嘗試取得串流網址
3. 預覽中可以看到：
   - 影片標題和代碼
   - 封面圖片（可點擊播放或前往原始頁面）
   - 串流網址（如果成功取得）
   - 播放按鈕（如果有串流網址）
4. 儲存後可在清單中查看，並隨時點擊播放

### 播放影片
- **在預覽中**：點擊「播放」按鈕或直接點擊封面圖片
- **在清單中**：點擊影片卡片上的「播放」按鈕或直接點擊封面

## 注意事項

- 串流網址抓取需要通過 Jina API 代理，部分網站可能無法成功提取
- 跨域限制可能影響某些串流的播放
- 建議使用支援 HTML5 video 的現代瀏覽器
- 播放器支援標準的 video 控制項（播放、暫停、音量、全螢幕等）
