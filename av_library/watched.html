<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>影片庫 - 看過的影片</title>
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico">
    <link rel="shortcut icon" href="../assets/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon.ico">
    <link rel="apple-touch-icon" href="../assets/images/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="css/av-library.css">
</head>
<body data-av-list="watched">
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="bi bi-collection-play me-2"></i>影片庫
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#avNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="avNavbar">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">主頁面</a></li>
                    <li class="nav-item"><a class="nav-link" href="later.html">稍後觀看</a></li>
                    <li class="nav-item"><a class="nav-link active" href="watched.html">看過的影片</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <header class="hero">
        <div class="container">
            <h1 class="section-title">看過的影片</h1>
            <p class="text-muted">從主頁面新增後，這裡會自動整理成相簿縮圖。</p>
        </div>
    </header>

    <main class="container pb-5">
        <div class="sync-bar mb-4">
            <div class="d-flex flex-wrap gap-2 align-items-center">
                <button type="button" class="btn btn-outline-primary btn-sm" id="av-sync-login">
                    <i class="bi bi-google me-1"></i>登入 Google
                </button>
                <button type="button" class="btn btn-outline-secondary btn-sm" id="av-sync-logout">
                    <i class="bi bi-box-arrow-right me-1"></i>登出
                </button>
                <button type="button" class="btn btn-outline-secondary btn-sm" id="av-sync-pull">
                    <i class="bi bi-cloud-download me-1"></i>同步下載
                </button>
                <button type="button" class="btn btn-outline-secondary btn-sm" id="av-sync-push">
                    <i class="bi bi-cloud-upload me-1"></i>同步上傳
                </button>
                <div class="form-check form-switch ms-2">
                    <input class="form-check-input" type="checkbox" id="av-sync-auto">
                    <label class="form-check-label" for="av-sync-auto">自動同步</label>
                </div>
            </div>
            <div class="sync-status" id="av-sync-status">尚未登入 Google Drive</div>
        </div>
        <div class="d-flex flex-wrap gap-2 align-items-center justify-content-between mb-3">
            <div class="btn-group" role="group" aria-label="View mode">
                <button type="button" class="btn btn-outline-secondary" data-av-view="grid">
                    <i class="bi bi-grid-3x3-gap"></i> 相簿
                </button>
                <button type="button" class="btn btn-outline-secondary" data-av-view="list">
                    <i class="bi bi-list"></i> 列表
                </button>
            </div>
            <div class="d-flex align-items-center gap-2">
                <label for="av-sort" class="text-muted">排序</label>
                <select id="av-sort" class="form-select form-select-sm" style="width: 160px;">
                    <option value="newest">最新新增</option>
                    <option value="oldest">最早新增</option>
                    <option value="title">依名稱</option>
                </select>
            </div>
        </div>
        <div id="av-empty-state" class="empty-state d-none">尚未新增影片。</div>
        <div id="av-card-list" class="card-grid"></div>
    </main>

    <div class="footer">影片庫 · 2026</div>

    <!-- 影片播放器模態框 -->
    <div class="modal fade" id="av-player-modal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="av-player-title">播放影片</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <video id="av-player" width="100%" height="auto" controls style="background: #000; border-radius: 8px;">
                        <p>您的瀏覽器不支援 HTML5 視頻。</p>
                    </video>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="js/av-library.js"></script>
</body>
</html>
